{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.formatErrorMessage = exports.formatJsonRpcError = exports.formatJsonRpcResult = exports.formatJsonRpcRequest = exports.payloadId = void 0;\n\nconst error_1 = require(\"./error\");\n\nconst constants_1 = require(\"./constants\");\n\nfunction payloadId() {\n  const date = Date.now() * Math.pow(10, 3);\n  const extra = Math.floor(Math.random() * Math.pow(10, 3));\n  return date + extra;\n}\n\nexports.payloadId = payloadId;\n\nfunction formatJsonRpcRequest(method, params, id) {\n  return {\n    id: id || payloadId(),\n    jsonrpc: \"2.0\",\n    method,\n    params\n  };\n}\n\nexports.formatJsonRpcRequest = formatJsonRpcRequest;\n\nfunction formatJsonRpcResult(id, result) {\n  return {\n    id,\n    jsonrpc: \"2.0\",\n    result\n  };\n}\n\nexports.formatJsonRpcResult = formatJsonRpcResult;\n\nfunction formatJsonRpcError(id, error) {\n  return {\n    id,\n    jsonrpc: \"2.0\",\n    error: formatErrorMessage(error)\n  };\n}\n\nexports.formatJsonRpcError = formatJsonRpcError;\n\nfunction formatErrorMessage(error) {\n  if (typeof error === \"undefined\") {\n    return error_1.getError(constants_1.INTERNAL_ERROR);\n  }\n\n  if (typeof error === \"string\") {\n    error = Object.assign(Object.assign({}, error_1.getError(constants_1.SERVER_ERROR)), {\n      message: error\n    });\n  }\n\n  if (error_1.isReservedErrorCode(error.code)) {\n    error = error_1.getErrorByCode(error.code);\n  }\n\n  if (!error_1.isServerErrorCode(error.code)) {\n    throw new Error(\"Error code is not in server code range\");\n  }\n\n  return error;\n}\n\nexports.formatErrorMessage = formatErrorMessage;","map":{"version":3,"sources":["../../src/format.ts"],"names":[],"mappings":";;;;;;;AAAA,MAAA,OAAA,GAAA,OAAA,CAAA,SAAA,CAAA;;AAMA,MAAA,WAAA,GAAA,OAAA,CAAA,aAAA,CAAA;;AAQA,SAAgB,SAAhB,GAAyB;AACvB,QAAM,IAAI,GAAG,IAAI,CAAC,GAAL,KAAa,IAAI,CAAC,GAAL,CAAS,EAAT,EAAa,CAAb,CAA1B;AACA,QAAM,KAAK,GAAG,IAAI,CAAC,KAAL,CAAW,IAAI,CAAC,MAAL,KAAgB,IAAI,CAAC,GAAL,CAAS,EAAT,EAAa,CAAb,CAA3B,CAAd;AACA,SAAO,IAAI,GAAG,KAAd;AACD;;AAJD,OAAA,CAAA,SAAA,GAAA,SAAA;;AAMA,SAAgB,oBAAhB,CACE,MADF,EAEE,MAFF,EAGE,EAHF,EAGa;AAEX,SAAO;AACL,IAAA,EAAE,EAAE,EAAE,IAAI,SAAS,EADd;AAEL,IAAA,OAAO,EAAE,KAFJ;AAGL,IAAA,MAHK;AAIL,IAAA;AAJK,GAAP;AAMD;;AAXD,OAAA,CAAA,oBAAA,GAAA,oBAAA;;AAaA,SAAgB,mBAAhB,CACE,EADF,EAEE,MAFF,EAEW;AAET,SAAO;AACL,IAAA,EADK;AAEL,IAAA,OAAO,EAAE,KAFJ;AAGL,IAAA;AAHK,GAAP;AAKD;;AATD,OAAA,CAAA,mBAAA,GAAA,mBAAA;;AAWA,SAAgB,kBAAhB,CACE,EADF,EAEE,KAFF,EAEgC;AAE9B,SAAO;AACL,IAAA,EADK;AAEL,IAAA,OAAO,EAAE,KAFJ;AAGL,IAAA,KAAK,EAAE,kBAAkB,CAAC,KAAD;AAHpB,GAAP;AAKD;;AATD,OAAA,CAAA,kBAAA,GAAA,kBAAA;;AAWA,SAAgB,kBAAhB,CACE,KADF,EACgC;AAE9B,MAAI,OAAO,KAAP,KAAiB,WAArB,EAAkC;AAChC,WAAO,OAAA,CAAA,QAAA,CAAS,WAAA,CAAA,cAAT,CAAP;AACD;;AACD,MAAI,OAAO,KAAP,KAAiB,QAArB,EAA+B;AAC7B,IAAA,KAAK,GAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EACA,OAAA,CAAA,QAAA,CAAS,WAAA,CAAA,YAAT,CADA,CAAA,EACsB;AACzB,MAAA,OAAO,EAAE;AADgB,KADtB,CAAL;AAID;;AACD,MAAI,OAAA,CAAA,mBAAA,CAAoB,KAAK,CAAC,IAA1B,CAAJ,EAAqC;AACnC,IAAA,KAAK,GAAG,OAAA,CAAA,cAAA,CAAe,KAAK,CAAC,IAArB,CAAR;AACD;;AACD,MAAI,CAAC,OAAA,CAAA,iBAAA,CAAkB,KAAK,CAAC,IAAxB,CAAL,EAAoC;AAClC,UAAM,IAAI,KAAJ,CAAU,wCAAV,CAAN;AACD;;AACD,SAAO,KAAP;AACD;;AAnBD,OAAA,CAAA,kBAAA,GAAA,kBAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.formatErrorMessage = exports.formatJsonRpcError = exports.formatJsonRpcResult = exports.formatJsonRpcRequest = exports.payloadId = void 0;\nconst error_1 = require(\"./error\");\nconst constants_1 = require(\"./constants\");\nfunction payloadId() {\n    const date = Date.now() * Math.pow(10, 3);\n    const extra = Math.floor(Math.random() * Math.pow(10, 3));\n    return date + extra;\n}\nexports.payloadId = payloadId;\nfunction formatJsonRpcRequest(method, params, id) {\n    return {\n        id: id || payloadId(),\n        jsonrpc: \"2.0\",\n        method,\n        params,\n    };\n}\nexports.formatJsonRpcRequest = formatJsonRpcRequest;\nfunction formatJsonRpcResult(id, result) {\n    return {\n        id,\n        jsonrpc: \"2.0\",\n        result,\n    };\n}\nexports.formatJsonRpcResult = formatJsonRpcResult;\nfunction formatJsonRpcError(id, error) {\n    return {\n        id,\n        jsonrpc: \"2.0\",\n        error: formatErrorMessage(error),\n    };\n}\nexports.formatJsonRpcError = formatJsonRpcError;\nfunction formatErrorMessage(error) {\n    if (typeof error === \"undefined\") {\n        return error_1.getError(constants_1.INTERNAL_ERROR);\n    }\n    if (typeof error === \"string\") {\n        error = Object.assign(Object.assign({}, error_1.getError(constants_1.SERVER_ERROR)), { message: error });\n    }\n    if (error_1.isReservedErrorCode(error.code)) {\n        error = error_1.getErrorByCode(error.code);\n    }\n    if (!error_1.isServerErrorCode(error.code)) {\n        throw new Error(\"Error code is not in server code range\");\n    }\n    return error;\n}\nexports.formatErrorMessage = formatErrorMessage;\n//# sourceMappingURL=format.js.map"]},"metadata":{},"sourceType":"script"}