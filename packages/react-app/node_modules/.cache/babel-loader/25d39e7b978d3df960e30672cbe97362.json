{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isValidKeyLength = exports.isNode = exports.isBrowser = exports.browserRandomBytes = exports.getSubtleCrypto = exports.getBrowerCrypto = exports.assert = exports.fallbackRandomBytes = exports.nodeRandomBytes = void 0;\n\nconst crypto_1 = __importDefault(require(\"crypto\"));\n\nconst randombytes_1 = __importDefault(require(\"randombytes\"));\n\nconst enc_utils_1 = require(\"enc-utils\");\n\nfunction nodeRandomBytes(length) {\n  const buf = crypto_1.default.randomBytes(length);\n  return enc_utils_1.bufferToArray(buf);\n}\n\nexports.nodeRandomBytes = nodeRandomBytes;\n\nfunction fallbackRandomBytes(length) {\n  return randombytes_1.default(length);\n}\n\nexports.fallbackRandomBytes = fallbackRandomBytes;\n\nfunction assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'Assertion failed');\n  }\n}\n\nexports.assert = assert;\n\nfunction getBrowerCrypto() {\n  return (global === null || global === void 0 ? void 0 : global.crypto) || (global === null || global === void 0 ? void 0 : global.msCrypto) || {};\n}\n\nexports.getBrowerCrypto = getBrowerCrypto;\n\nfunction getSubtleCrypto() {\n  const browserCrypto = getBrowerCrypto();\n  return browserCrypto.subtle || browserCrypto.webkitSubtle;\n}\n\nexports.getSubtleCrypto = getSubtleCrypto;\n\nfunction browserRandomBytes(length) {\n  const browserCrypto = getBrowerCrypto();\n\n  if (typeof browserCrypto.getRandomValues !== 'undefined') {\n    return browserCrypto.getRandomValues(new Uint8Array(length));\n  }\n\n  return fallbackRandomBytes(length);\n}\n\nexports.browserRandomBytes = browserRandomBytes;\n\nfunction isBrowser() {\n  return !!getBrowerCrypto() && !!getSubtleCrypto();\n}\n\nexports.isBrowser = isBrowser;\n\nfunction isNode() {\n  return typeof process !== 'undefined' && typeof process.versions !== 'undefined' && typeof process.versions.node !== 'undefined';\n}\n\nexports.isNode = isNode;\n\nfunction isValidKeyLength(length) {\n  return !(length <= 0 || length > 1024 || parseInt(String(length)) !== length);\n}\n\nexports.isValidKeyLength = isValidKeyLength;","map":{"version":3,"sources":["../../../src/helpers/index.ts"],"names":[],"mappings":";;;;;;;;;;;;;AAAA,MAAA,QAAA,GAAA,eAAA,CAAA,OAAA,CAAA,QAAA,CAAA,CAAA;;AACA,MAAA,aAAA,GAAA,eAAA,CAAA,OAAA,CAAA,aAAA,CAAA,CAAA;;AACA,MAAA,WAAA,GAAA,OAAA,CAAA,WAAA,CAAA;;AAEA,SAAgB,eAAhB,CAAgC,MAAhC,EAA8C;AAC5C,QAAM,GAAG,GAAG,QAAA,CAAA,OAAA,CAAO,WAAP,CAAmB,MAAnB,CAAZ;AACA,SAAO,WAAA,CAAA,aAAA,CAAc,GAAd,CAAP;AACD;;AAHD,OAAA,CAAA,eAAA,GAAA,eAAA;;AAKA,SAAgB,mBAAhB,CAAoC,MAApC,EAAkD;AAChD,SAAO,aAAA,CAAA,OAAA,CAAY,MAAZ,CAAP;AACD;;AAFD,OAAA,CAAA,mBAAA,GAAA,mBAAA;;AAIA,SAAgB,MAAhB,CAAuB,SAAvB,EAA2C,OAA3C,EAA0D;AACxD,MAAI,CAAC,SAAL,EAAgB;AACd,UAAM,IAAI,KAAJ,CAAU,OAAO,IAAI,kBAArB,CAAN;AACD;AACF;;AAJD,OAAA,CAAA,MAAA,GAAA,MAAA;;AAMA,SAAgB,eAAhB,GAA+B;AAE7B,SAAO,CAAA,MAAM,KAAA,IAAN,IAAA,MAAM,KAAA,KAAA,CAAN,GAAM,KAAA,CAAN,GAAA,MAAM,CAAE,MAAR,MAAkB,MAAM,KAAA,IAAN,IAAA,MAAM,KAAA,KAAA,CAAN,GAAM,KAAA,CAAN,GAAA,MAAM,CAAE,QAA1B,KAAsC,EAA7C;AACD;;AAHD,OAAA,CAAA,eAAA,GAAA,eAAA;;AAKA,SAAgB,eAAhB,GAA+B;AAC7B,QAAM,aAAa,GAAG,eAAe,EAArC;AAEA,SAAO,aAAa,CAAC,MAAd,IAAwB,aAAa,CAAC,YAA7C;AACD;;AAJD,OAAA,CAAA,eAAA,GAAA,eAAA;;AAMA,SAAgB,kBAAhB,CAAmC,MAAnC,EAAiD;AAC/C,QAAM,aAAa,GAAG,eAAe,EAArC;;AACA,MAAI,OAAO,aAAa,CAAC,eAArB,KAAyC,WAA7C,EAA0D;AACxD,WAAO,aAAa,CAAC,eAAd,CAA8B,IAAI,UAAJ,CAAe,MAAf,CAA9B,CAAP;AACD;;AACD,SAAO,mBAAmB,CAAC,MAAD,CAA1B;AACD;;AAND,OAAA,CAAA,kBAAA,GAAA,kBAAA;;AAQA,SAAgB,SAAhB,GAAyB;AACvB,SAAO,CAAC,CAAC,eAAe,EAAjB,IAAuB,CAAC,CAAC,eAAe,EAA/C;AACD;;AAFD,OAAA,CAAA,SAAA,GAAA,SAAA;;AAIA,SAAgB,MAAhB,GAAsB;AACpB,SACE,OAAO,OAAP,KAAmB,WAAnB,IACA,OAAO,OAAO,CAAC,QAAf,KAA4B,WAD5B,IAEA,OAAO,OAAO,CAAC,QAAR,CAAiB,IAAxB,KAAiC,WAHnC;AAKD;;AAND,OAAA,CAAA,MAAA,GAAA,MAAA;;AAQA,SAAgB,gBAAhB,CAAiC,MAAjC,EAA+C;AAC7C,SAAO,EAAE,MAAM,IAAI,CAAV,IAAe,MAAM,GAAG,IAAxB,IAAgC,QAAQ,CAAC,MAAM,CAAC,MAAD,CAAP,CAAR,KAA6B,MAA/D,CAAP;AACD;;AAFD,OAAA,CAAA,gBAAA,GAAA,gBAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isValidKeyLength = exports.isNode = exports.isBrowser = exports.browserRandomBytes = exports.getSubtleCrypto = exports.getBrowerCrypto = exports.assert = exports.fallbackRandomBytes = exports.nodeRandomBytes = void 0;\nconst crypto_1 = __importDefault(require(\"crypto\"));\nconst randombytes_1 = __importDefault(require(\"randombytes\"));\nconst enc_utils_1 = require(\"enc-utils\");\nfunction nodeRandomBytes(length) {\n    const buf = crypto_1.default.randomBytes(length);\n    return enc_utils_1.bufferToArray(buf);\n}\nexports.nodeRandomBytes = nodeRandomBytes;\nfunction fallbackRandomBytes(length) {\n    return randombytes_1.default(length);\n}\nexports.fallbackRandomBytes = fallbackRandomBytes;\nfunction assert(condition, message) {\n    if (!condition) {\n        throw new Error(message || 'Assertion failed');\n    }\n}\nexports.assert = assert;\nfunction getBrowerCrypto() {\n    return (global === null || global === void 0 ? void 0 : global.crypto) || (global === null || global === void 0 ? void 0 : global.msCrypto) || {};\n}\nexports.getBrowerCrypto = getBrowerCrypto;\nfunction getSubtleCrypto() {\n    const browserCrypto = getBrowerCrypto();\n    return browserCrypto.subtle || browserCrypto.webkitSubtle;\n}\nexports.getSubtleCrypto = getSubtleCrypto;\nfunction browserRandomBytes(length) {\n    const browserCrypto = getBrowerCrypto();\n    if (typeof browserCrypto.getRandomValues !== 'undefined') {\n        return browserCrypto.getRandomValues(new Uint8Array(length));\n    }\n    return fallbackRandomBytes(length);\n}\nexports.browserRandomBytes = browserRandomBytes;\nfunction isBrowser() {\n    return !!getBrowerCrypto() && !!getSubtleCrypto();\n}\nexports.isBrowser = isBrowser;\nfunction isNode() {\n    return (typeof process !== 'undefined' &&\n        typeof process.versions !== 'undefined' &&\n        typeof process.versions.node !== 'undefined');\n}\nexports.isNode = isNode;\nfunction isValidKeyLength(length) {\n    return !(length <= 0 || length > 1024 || parseInt(String(length)) !== length);\n}\nexports.isValidKeyLength = isValidKeyLength;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"script"}